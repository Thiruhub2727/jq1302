#!/bin/bash

# Sample JSON data
JSON_DATA='{
  "name": "Alice",
  "age": 25,
  "city": "New York",
  "skills": ["AWS", "Azure", "GCP"],
  "projects": [
    {"name": "Project A", "status": "completed"},
    {"name": "Project B", "status": "ongoing"}
  ]
}'

echo "ğŸ”¹ Original JSON:"
echo "$JSON_DATA" | jq .

# âœ… 1. Extract a specific value
echo "ğŸ”¹ Extract Name:"
echo "$JSON_DATA" | jq -r '.name'

# âœ… 2. Extract values from an array
echo "ğŸ”¹ Extract Skills:"
echo "$JSON_DATA" | jq -r '.skills[]'

# âœ… 3. Filter projects with status = "ongoing"
echo "ğŸ”¹ Ongoing Projects:"
echo "$JSON_DATA" | jq '.projects[] | select(.status=="ongoing")'

# âœ… 4. Modify JSON (Change city to "San Francisco")
echo "ğŸ”¹ Modify City:"
echo "$JSON_DATA" | jq '.city = "San Francisco"'

# âœ… 5. Add a new key-value pair
echo "ğŸ”¹ Add Country Field:"
echo "$JSON_DATA" | jq '. + {"country": "USA"}'

# âœ… 6. Remove the 'age' field
echo "ğŸ”¹ Remove Age Field:"
echo "$JSON_DATA" | jq 'del(.age)'

# âœ… 7. Merge two JSON objects
NEW_JSON='{"department": "Engineering", "level": "Senior"}'
echo "ğŸ”¹ Merged JSON:"
jq -n --argjson a "$JSON_DATA" --argjson b "$NEW_JSON" '$a + $b'

# âœ… 8. Loop through projects and extract names
echo "ğŸ”¹ Extract Project Names:"
echo "$JSON_DATA" | jq -r '.projects[].name'

# âœ… 9. Validate JSON (Exit if invalid)
echo "$JSON_DATA" | jq empty && echo "âœ… JSON is valid!" || echo "âŒ Invalid JSON!"

exit 0
